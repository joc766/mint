# Docker Compose development configuration
# This file provides development-specific configuration with hot reload and volume mounting
# 
# Usage:
#   Development mode: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up
#   Production mode:  BUILD_MODE=production docker-compose up --build
#
# Note: This file is NOT automatically loaded (previously named docker-compose.override.yml)
#       You must explicitly include it with -f flag for development mode

services:
  frontend:
    build:
      target: development
      args:
        BUILD_MODE: development
        NEXT_PUBLIC_API_URL: http://localhost:8000
    environment:
        NEXT_PUBLIC_API_URL: http://localhost:8000
        # Enable file watching for hot reload in Docker (uncomment for dev mode)
        WATCHPACK_POLLING: "true"
        CHOKIDAR_USEPOLLING: "true"
    volumes:
        # Mount source code for hot reload (cached for better macOS performance)
        # Uncomment these for development mode with hot reload:
         - ./frontend:/app:cached
        # Prevent node_modules and .next from being overwritten by host
         - /app/node_modules
         - /app/.next
    # depends_on:
    #     - api

